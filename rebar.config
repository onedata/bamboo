{sub_dirs, ["rel"]}.

{deps, [
  {lager, "2.0.3", {git, "git://github.com/basho/lager.git", {tag, "2.0.3"}}},
  {n2o, ".*", {git, "git://github.com/5HT/n2o", {tag, "1.1.0"}}},
  {cowboy, "0.8.6", {git, "git://github.com/extend/cowboy.git", {tag, "0.8.6"}}},
  {ibrowse, "4.0.1", {git, "git://github.com/cmullaparthi/ibrowse.git", {tag, "v4.0.1"}}},
  {mochiweb, ".*", {git, "https://github.com/mochi/mochiweb.git", {tag, "b37b6fe"}}}
]}.

{pre_hooks, [
    {compile, "mkdir -p c_lib"},
    {compile, "ln -sf `g++ -print-file-name=libstdc++.a` c_lib"} %% libstdc++ static linkage
]}.

{post_hooks, [
    {compile, "chmod +x c_src/link_shared.sh"},
    {compile, "./c_src/link_shared.sh botan-1.10 pkcs10_drv.so"},
    {compile, "rm -rf c_lib/*.a"}
]}.

{clean_files, ["c_lib"]}.

{port_specs, [
    {"c_lib/pkcs10_drv.so", ["c_src/pkcs10.cc", "c_src/pkcs10_nif.cc"]}
]}.

{port_env, [
    {"LDFLAGS", "$LDFLAGS -lbotan-1.10"},
    {"CXXFLAGS", "$CXXFLAGS -O2 -ansi -W -Wall -I/usr/local/include/botan-1.10"}
]}.

{erl_opts, [
  fail_on_warning,
  debug_info,
  {parse_transform, lager_transform}
]}.

% Options for erlyDTL (templates for GUI)
{erlydtl_opts, [
  {doc_root, "src/gui_static/templates"},
  {out_dir, "ebin"},
  {source_ext, ".html"},
  {module_ext, "_view"}
]}.
